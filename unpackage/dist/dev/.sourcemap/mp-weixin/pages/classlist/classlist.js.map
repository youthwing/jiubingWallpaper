{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","../../front/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"classifylist\">\r\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<navigator :url=\"'/pages/preview/preview?id='+item._id\" class=\"item\" v-for=\"item in classList\"\r\n\t\t\t\t:key=\"item._id\">\r\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\r\n\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"safe-area-inset-bottom\">\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from \"vue\"\r\n\r\n\timport {\r\n\t\tapiGetClassList,\r\n\t\tapiGetHistoryList\r\n\t} from \"@/api/apis.js\";\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonReachBottom,\r\n\t\tonShareAppMessage,\r\n\t\tonShareTimeline\r\n\t} from \"@dcloudio/uni-app\"\r\n\timport {\r\n\t\tgotoHome\r\n\t} from \"@/utils/common.js\"\r\n\r\n\tconst classList = ref([]);\r\n\tconst noData = ref(false);\r\n\t//定义data参数\r\n\tconst queryParams = {\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 12\r\n\t}\r\n\tlet pageName\r\n\r\n\t// onload传递组件参数\r\n\tonLoad((e) => {\r\n\t\tlet {\r\n\t\t\tid = null, name = null, type = null\r\n\t\t} = e;\r\n\t\tif (type) queryParams.type = type;\r\n\t\tif (id) queryParams.classid = id;\r\n\r\n\t\tpageName = name\r\n\t\t//修改导航标题\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: name\r\n\t\t})\r\n\t\t//执行获取分类列表方法\r\n\t\tgetClassList();\r\n\t})\r\n\r\n\r\n\tonReachBottom(() => {\r\n\t\tif (noData.value) return;\r\n\t\tqueryParams.pageNum++;\r\n\r\n\t\tgetClassList()\r\n\r\n\t})\r\n\r\n\t//获取网络请求\r\n\tconst getClassList = async () => {\r\n\t\tlet res;\r\n\t\tif (queryParams.classid) res = await apiGetClassList(queryParams);\r\n\t\tif (queryParams.type) res = await apiGetHistoryList(queryParams);\r\n\r\n\t\tclassList.value = [...classList.value, ...res.data];\r\n\t\tif (queryParams.pageSize > res.data.length) noData.value = true;\r\n\t\tuni.setStorageSync(\"storgClassList\", classList.value);\r\n\t}\r\n\r\n\t//分享给好友\r\n\tonShareAppMessage((e) => {\r\n\t\treturn {\r\n\t\t\ttitle: \"救兵壁纸,壁纸救兵\",\r\n\t\t\tpath: \"/pages/classlist/classlist?id=\" + queryParams.classid + \"&name=\" + pageName\r\n\t\t}\r\n\t})\r\n\t//朋友圈\r\n\tonShareTimeline(() => {\r\n\t\treturn {\r\n\t\t\ttitle: \"救兵壁纸,壁纸救兵\",\r\n\t\t\timageUrl: \"/static/images/JiuBing\",\r\n\t\t\tquery: \"id = \" + queryParams.classid + \" & name = \" + pageName\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.classifylist {\r\n\r\n\r\n\t\t.content {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\tgap: 5rpx;\r\n\t\t\tpadding: 5rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\theight: 440rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/JiuBingWallPaper/wallpaper/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onReachBottom","apiGetClassList","apiGetHistoryList","onShareAppMessage","onShareTimeline"],"mappings":";;;;;;;;;;;;;;AAoBA,UAAA,YAAAA,kBAAA,CAAA,CAAA;AAmBA,UAAA,SAAAA,kBAAA,KAAA;AAEA,UAAA,cAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AACA,QAAA;AAGAC,kBAAA,OAAA,CAAA,MAAA;AACA,UAAA;AAAA,QACA,KAAA;AAAA,QAAA,OAAA;AAAA,QAAA,OAAA;AAAA,MACA,IAAA;AACA,UAAA;AAAA,oBAAA,OAAA;AACA,UAAA;AAAA,oBAAA,UAAA;AAEA,iBAAA;AAEAC,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA;AAAA,MACA,CAAA;AAEA;IACA,CAAA;AAGAC,kBAAAA,cAAA,MAAA;AACA,UAAA,OAAA;AAAA;AACA,kBAAA;AAEA,mBAAA;AAAA,IAEA,CAAA;AAGA,UAAA,eAAA,YAAA;AACA,UAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,gBAAA,WAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,kBAAA,WAAA;AAEA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,YAAA,WAAA,IAAA,KAAA;AAAA,eAAA,QAAA;AACAH,oBAAAA,MAAA,eAAA,kBAAA,UAAA,KAAA;AAAA,IACA;AAGAI,kBAAA,kBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,MAAA,mCAAA,YAAA,UAAA,WAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,UAAA;AAAA,QACA,OAAA,UAAA,YAAA,UAAA,eAAA;AAAA,MACA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGA,GAAG,WAAW,eAAe;"}