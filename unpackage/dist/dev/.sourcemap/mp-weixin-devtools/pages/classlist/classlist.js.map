{"version":3,"names":["classList","common_vendor","ref","noData","queryParams","pageNum","pageSize","pageName","onLoad","e","_e$id","id","_e$name","name","_e$type","type","classid","index","setNavigationBarTitle","title","getClassList","onReachBottom","value","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","apis_apis","apiGetClassList","sent","apiGetHistoryList","concat","_toConsumableArray2","data","length","setStorageSync","__f__","stop","apply","arguments","onShareAppMessage","path","onShareTimeline","imageUrl","query","wx","createPage","MiniProgramPage"],"sources":["classlist.vue","cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"classifylist\">\r\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<navigator :url=\"'/pages/preview/preview?id='+item._id\" class=\"item\" v-for=\"item in classList\"\r\n\t\t\t\t:key=\"item._id\">\r\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\r\n\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"safe-area-inset-bottom\">\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from \"vue\"\r\n\r\n\timport {\r\n\t\tapiGetClassList,\r\n\t\tapiGetHistoryList\r\n\t} from \"@/apis/apis.js\";\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonReachBottom,\r\n\t\tonShareAppMessage,\r\n\t\tonShareTimeline\r\n\t} from \"@dcloudio/uni-app\"\r\n\timport {\r\n\t\tgotoHome\r\n\t} from \"@/utils/common.js\"\r\n\r\n\tconst classList = ref([]);\r\n\tconst noData = ref(false);\r\n\t//定义data参数\r\n\tconst queryParams = {\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 12\r\n\t}\r\n\tlet pageName\r\n\r\n\t// onload传递组件参数\r\n\tonLoad((e) => {\r\n\t\tlet {\r\n\t\t\tid = null, name = null, type = null\r\n\t\t} = e;\r\n\t\tif (type) queryParams.type = type;\r\n\t\tif (id) queryParams.classid = id;\r\n\r\n\t\tpageName = name\r\n\t\t//修改导航标题\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: name\r\n\t\t})\r\n\t\t//执行获取分类列表方法\r\n\t\tgetClassList();\r\n\t})\r\n\r\n\r\n\tonReachBottom(() => {\r\n\t\tif (noData.value) return;\r\n\t\tqueryParams.pageNum++;\r\n\r\n\t\tgetClassList()\r\n\r\n\t})\r\n\r\n\t//获取网络请求\r\n\tconst getClassList = async () => {\r\n\t\tlet res;\r\n\t\tif (queryParams.classid) res = await apiGetClassList(queryParams);\r\n\t\tif (queryParams.type) res = await apiGetHistoryList(queryParams);\r\n\r\n\t\tclassList.value = [...classList.value, ...res.data];\r\n\t\tif (queryParams.pageSize > res.data.length) noData.value = true;\r\n\t\tuni.setStorageSync(\"storgClassList\", classList.value);\r\n\t\tconsole.log(classList.value);\r\n\t}\r\n\r\n\t//分享给好友\r\n\tonShareAppMessage((e) => {\r\n\t\treturn {\r\n\t\t\ttitle: \"救兵壁纸,壁纸救兵\",\r\n\t\t\tpath: \"/pages/classlist/classlist?id=\" + queryParams.classid + \"&name=\" + pageName\r\n\t\t}\r\n\t})\r\n\t//朋友圈\r\n\tonShareTimeline(() => {\r\n\t\treturn {\r\n\t\t\ttitle: \"救兵壁纸,壁纸救兵\",\r\n\t\t\timageUrl: \"/static/images/JiuBing\",\r\n\t\t\tquery: \"id = \" + queryParams.classid + \" & name = \" + pageName\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.classifylist {\r\n\r\n\r\n\t\t.content {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\tgap: 5rpx;\r\n\t\t\tpadding: 5rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\theight: 440rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/JiuBingWallPaper/wallpaper/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;IAoBA,IAAAA,SAAA,GAAAC,aAAA,CAAAC,GAAA;IAmBA,IAAAC,MAAA,GAAAF,aAAA,CAAAC,GAAA;IAEA,IAAAE,WAAA;MACAC,OAAA;MACAC,QAAA;IACA;IACA,IAAAC,QAAA;IAGAN,aAAA,CAAAO,MAAA,WAAAC,CAAA;MACA,IAAAC,KAAA,GAEAD,CAAA,CADAE,EAAA;QAAAA,EAAA,GAAAD,KAAA,qBAAAA,KAAA;QAAAE,OAAA,GACAH,CAAA,CADAI,IAAA;QAAAA,IAAA,GAAAD,OAAA,qBAAAA,OAAA;QAAAE,OAAA,GACAL,CAAA,CADAM,IAAA;QAAAA,IAAA,GAAAD,OAAA,qBAAAA,OAAA;MAEA,IAAAC,IAAA,EAAAX,WAAA,CAAAW,IAAA,GAAAA,IAAA;MACA,IAAAJ,EAAA,EAAAP,WAAA,CAAAY,OAAA,GAAAL,EAAA;MAEAJ,QAAA,GAAAM,IAAA;MAEAZ,aAAA,CAAAgB,KAAA,CAAAC,qBAAA;QACAC,KAAA,EAAAN;MACA;MAEAO,YAAA;IACA;IAGAnB,aAAA,CAAAoB,aAAA;MACA,IAAAlB,MAAA,CAAAmB,KAAA;MACAlB,WAAA,CAAAC,OAAA;MAEAe,YAAA;IAEA;IAGA,IAAAA,YAAA;MAAA,IAAAG,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,KAEA7B,WAAA,CAAAY,OAAA;gBAAAe,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAAAC,SAAA,CAAAC,eAAA,CAAA/B,WAAA;YAAA;cAAAwB,GAAA,GAAAG,QAAA,CAAAK,IAAA;YAAA;cAAA,KACAhC,WAAA,CAAAW,IAAA;gBAAAgB,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAAAC,SAAA,CAAAG,iBAAA,CAAAjC,WAAA;YAAA;cAAAwB,GAAA,GAAAG,QAAA,CAAAK,IAAA;YAAA;cAEApC,SAAA,CAAAsB,KAAA,MAAAgB,MAAA,CAAAC,mBAAA,CAAAvC,SAAA,CAAAsB,KAAA,GAAAiB,mBAAA,CAAAX,GAAA,CAAAY,IAAA;cACA,IAAApC,WAAA,CAAAE,QAAA,GAAAsB,GAAA,CAAAY,IAAA,CAAAC,MAAA,EAAAtC,MAAA,CAAAmB,KAAA;cACArB,aAAA,CAAAgB,KAAA,CAAAyB,cAAA,mBAAA1C,SAAA,CAAAsB,KAAA;cACArB,aAAA,CAAAgB,KAAA,CAAA0B,KAAA,+CAAA3C,SAAA,CAAAsB,KAAA;YAAA;YAAA;cAAA,OAAAS,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA,CACA;MAAA,gBATAP,aAAA;QAAA,OAAAG,IAAA,CAAAsB,KAAA,OAAAC,SAAA;MAAA;IAAA,GASA;IAGA7C,aAAA,CAAA8C,iBAAA,WAAAtC,CAAA;MACA;QACAU,KAAA;QACA6B,IAAA,qCAAA5C,WAAA,CAAAY,OAAA,cAAAT;MACA;IACA;IAEAN,aAAA,CAAAgD,eAAA;MACA;QACA9B,KAAA;QACA+B,QAAA;QACAC,KAAA,YAAA/C,WAAA,CAAAY,OAAA,kBAAAT;MACA;IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGA6C,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}